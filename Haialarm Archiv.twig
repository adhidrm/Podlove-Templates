{# 
see it working on http://haialarm-podcast.de/archiv-2/ 
#}
{% set Downloadsumme = 0 %} {# set a counting-variable to start from zero, 'Downloadsumme' means 'sum of all downloads' #}
{% for episode in podcast.episodes %} {# iterate through all episodes and add the number of downloads to the counter #}
    {% set Downloadsumme = Downloadsumme + episode.total_downloads %}
{% endfor %}

{% set Durchschnitt = Downloadsumme / podcast.episodes|length %} {# produce an average of downloads per episode #}
{# we use Durchschnitt|round in the following paragraph to avoid a floating number #}

<p>{{ podcast.summary }}</p>
<p style="margin-bottom:30px">Der {{ podcast.title }} besteht aus {{ Episodenzaehler }} Episoden. Jede davon wurde im Durchschnitt {{ Durchschnitt|round }} mal heruntergeladen.</p>
<ul style="list-style-type:none">    {# lists episodes, bulletpoints are turned of #}
    {% for episode in podcast.episodes %} {# creates a list-element for each episode, links episode slug and title. I also insert the subtitle and date, duration and downloads. #}
          <li style="margin-bottom:20px"><span style="font-weight:bold;font-size:1.5em"><a href="{{ episode.url }}">{{ episode.post.post_title }}</a></span><br /><span style="font-style:italic">{{ episode.subtitle }}</span><br /><small><span class="podlove-duration" style="margin-right:30px"><img src="http://icons.joernschaar.de/dauer.png" alt="Die Dauer der Episode" title="Die Dauer der Episode" width="20px"> {{ episode.duration }}</span><span class="podlove-duration" style="margin-right:30px"><img src="http://icons.joernschaar.de/kalender.png" alt="Diese Episode erschien am" title="Diese Episode erschient am" width="20px"> {{ episode.publicationdate.format('d.m.Y') }}</span><span class="podlove-duration"><img src="http://icons.joernschaar.de/downloads.png" alt="Downloads seit Veröffentlichung" title="Downloads seit Veröffentlichung" width="20px"> {{ episode.total_downloads | number_format(0, ',', '.') }} Downloads</span> </small></li>
    {% endfor %}
</ul>
